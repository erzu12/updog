<ion-app>
  <ion-split-pane contentId="main-content">
    <ion-menu contentId="main-content" type="overlay" [disabled]="user == undefined">
      <ion-content>
        <ion-card>
          <ion-item lines="none" [button]="true" id="account-button">
            <ion-avatar slot="start">
              <img alt="Profilepicture" src="{{user?.photoURL}}"/>
            </ion-avatar>
            <div class="profile-text">
              <ion-label>{{user?.displayName}}</ion-label>
              <ion-note>{{user?.email}}</ion-note>
            </div>
          </ion-item>
        </ion-card>
        <ion-popover trigger="account-button" trigger-action="click">
          <ng-template id="account-popover">
            <ion-item>
              <ion-toggle [checked]="themeSwitcher.toggle" (ionChange)="themeSwitcher.toggleChange($event)">Dark Mode</ion-toggle>
            </ion-item>
            <ion-item>
              <ion-button (click)="signOut()" color="danger">Logout</ion-button>
            </ion-item>
          </ng-template>
        </ion-popover>
        <ion-list id="inbox-list">
          <ion-menu-toggle auto-hide="false" *ngFor="let c of chats; let i = index">
            <ion-item routerDirection="root" [routerLink]="'/chat/' + c.chatId" lines="full" detail="false"
                      routerLinkActive="selected">
              <ion-avatar slot="start">
                <img alt="Profilepicture" src="{{c.img}}"/>
              </ion-avatar>
              <div class="profile-text">
                <ion-label>{{c.displayName}}</ion-label>
              </div>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>

      </ion-content>
    </ion-menu>
    <ion-router-outlet id="main-content"></ion-router-outlet>
  </ion-split-pane>
</ion-app>
